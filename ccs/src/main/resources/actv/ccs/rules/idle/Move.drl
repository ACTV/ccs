package actv.ccs.rules.idle;

import actv.ccs.sageTest.MoveActionFactory;
import actv.ccs.model.ConvictCichlid;
import actv.ccs.model.type.FishState;
import java.util.Random;
import actv.ccs.fact.MoveCounter;

global org.slf4j.Logger logger

rule "Move"
	ruleflow-group "swim"
	
	when
		$cc : ConvictCichlid( )
							  
		$mc : MoveCounter(	convictCichlid == $cc, 
							counter > 0, 
							$counter : counter, 
							direction != 0,
							$dir : direction)
		
	then
		logger.info("Moved... {}", $mc.getCounter());
		logger.info("Direction {}", $cc.getDirection());
		
		MoveActionFactory.turn($cc, $counter * $dir);
		update($cc);
		
		$mc.setCounter($counter - 1);
		update($mc);
		
				
end


